# Configuração do dnsmasq para DHCP do Captive Portal
# Localização: /etc/dnsmasq.conf
#
# INSTRUÇÕES DE INSTALAÇÃO:
# 1. Instale: sudo apt install dnsmasq -y
# 2. Faça backup: sudo mv /etc/dnsmasq.conf /etc/dnsmasq.conf.original
# 3. Copie este arquivo para /etc/dnsmasq.conf
# 4. Ajuste a interface se necessário (enp2s0)
# 5. Reinicie: sudo systemctl restart dnsmasq
# 6. Habilite: sudo systemctl enable dnsmasq

# Interface de rede (apenas na LAN)
# AJUSTE O NOME DA INTERFACE CONFORME SEU SISTEMA
interface=enp2s0
bind-interfaces

# Desabilitar função DNS (usaremos apenas DHCP)
# O gateway não será um servidor DNS, apenas DHCP
port=0

# Range de IPs para DHCP
# Clientes receberão IPs entre .100 e .254
dhcp-range=192.168.10.100,192.168.10.254,12h

# Opções DHCP
dhcp-option=3,192.168.10.1     # Gateway padrão (este servidor)
dhcp-option=6,8.8.8.8,8.8.4.4  # Servidores DNS (Google)

# Registrar concessões DHCP em arquivo
dhcp-leasefile=/var/lib/misc/dnsmasq.leases

# Log (descomente para debug)
# log-queries
# log-dhcp

# Autoridade DHCP (responder com autoridade)
dhcp-authoritative

# Ignorar solicitações de outras interfaces
except-interface=enp1s0
except-interface=lo
